include(CTest)
include(GoogleTest)
enable_testing()

set(TESTS_EXECUTABLE_NAME secret_box_tests)

add_executable(${TESTS_EXECUTABLE_NAME} secret_box.cpp)
target_link_libraries(${TESTS_EXECUTABLE_NAME} PUBLIC
    ${LIB_SECRET_BOX}
    ${LIB_SECRET_BOX_HACK}
    GTest::gtest_main)

gtest_add_tests(
    TARGET ${TESTS_EXECUTABLE_NAME}
    SOURCES secret_box.cpp)
gtest_discover_tests(${TESTS_EXECUTABLE_NAME} DISCOVERY_MODE PRE_TEST)
